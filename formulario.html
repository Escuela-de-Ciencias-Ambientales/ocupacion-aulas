<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Registro de Adecuaciones ‚Äî EDECA</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg:      #f1f5f9;
  --white:   #ffffff;
  --border:  #e2e8f0;
  --border2: #cbd5e1;
  --text:    #0f172a;
  --dim:     #64748b;
  --blue:    #2563eb;
  --blue-bg: #eff6ff;
  --blue-mid:#bfdbfe;
  --green:   #059669;
  --green-bg:#f0fdf4;
  --green-mid:#bbf7d0;
  --orange:  #d97706;
  --orange-bg:#fffbeb;
  --red:     #dc2626;
  --red-bg:  #fef2f2;
  --purple:  #7c3aed;
  --purple-bg:#faf5ff;
  --shadow:  0 2px 12px rgba(15,23,42,.07);
  --shadow-lg:0 8px 32px rgba(15,23,42,.13);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Plus Jakarta Sans',sans-serif;
  background:var(--bg);color:var(--text);
  min-height:100vh;padding:2rem 1rem 6rem;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.page-header{
  max-width:800px;margin:0 auto 2rem;
  text-align:center;
}
.header-card{
  background:var(--white);border-radius:18px;
  box-shadow:var(--shadow-lg);overflow:hidden;
}
.header-stripe{
  height:7px;
  background:linear-gradient(90deg,#1d4ed8,#2563eb,#7c3aed,#059669);
}
.header-body{padding:1.8rem 2rem 1.5rem;}
.header-logo{
  display:flex;align-items:center;justify-content:center;
  gap:.6rem;margin-bottom:.9rem;
}
.logo-dot{
  width:10px;height:10px;border-radius:50%;
  background:var(--blue);
  box-shadow:0 0 10px rgba(37,99,235,.4);
}
.header-title{
  font-size:1.5rem;font-weight:700;
  color:var(--text);letter-spacing:-.02em;
}
.header-sub{
  font-size:.88rem;color:var(--dim);
  margin-top:.35rem;line-height:1.5;
}

/* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
.card{
  max-width:800px;margin:0 auto 1.2rem;
  background:var(--white);border-radius:16px;
  border:1px solid var(--border);box-shadow:var(--shadow);
  overflow:hidden;
}
.card-head{
  padding:.9rem 1.5rem;border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:.7rem;background:#fafbfc;
}
.card-icon{
  width:34px;height:34px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-size:1rem;flex-shrink:0;
}
.card-title{font-weight:700;font-size:.9rem;}
.card-sub{font-size:.74rem;color:var(--dim);margin-top:.1rem;}
.card-body{padding:1.5rem;}

/* ‚îÄ‚îÄ FIELDS ‚îÄ‚îÄ */
.field{margin-bottom:1rem;}
.field:last-child{margin-bottom:0;}
.field-label{
  display:block;font-size:.79rem;font-weight:600;
  color:var(--text);margin-bottom:.38rem;
}
.req{color:var(--red);}
.field-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
.field-row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;}
.field-hint{font-size:.72rem;color:var(--dim);margin-top:.3rem;}

select.fi,input.fi,textarea.fi{
  width:100%;padding:.62rem .95rem;
  border:1.5px solid var(--border2);border-radius:9px;
  font-family:'Plus Jakarta Sans',sans-serif;font-size:.87rem;
  color:var(--text);background:var(--bg);outline:none;
  transition:all .2s;
}
select.fi{
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2364748b' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right .9rem center;
  padding-right:2.3rem;
}
select.fi:focus,input.fi:focus,textarea.fi:focus{
  border-color:var(--blue);background:var(--white);
  box-shadow:0 0 0 3px rgba(37,99,235,.1);
}
input.fi[readonly]{opacity:.65;cursor:not-allowed;background:var(--bg);}
textarea.fi{min-height:70px;resize:vertical;}

/* ‚îÄ‚îÄ PROFESOR SELECTOR ‚îÄ‚îÄ */
.prof-select-wrap select.fi{
  font-size:.95rem;font-weight:600;
  border-width:2px;border-color:var(--blue);
  background-color:var(--white);
  box-shadow:0 0 0 4px rgba(37,99,235,.08);
  padding:.75rem 2.5rem .75rem 1rem;
}
.loading-bar{
  height:3px;background:var(--border);border-radius:999px;
  overflow:hidden;margin-top:.5rem;display:none;
}
.loading-bar.show{display:block;}
.loading-fill{
  height:100%;width:0;border-radius:999px;
  background:linear-gradient(90deg,var(--blue),var(--purple));
  transition:width .5s ease;
}
.prof-tag{
  display:none;margin-top:.6rem;
  padding:.45rem .9rem;border-radius:999px;
  background:var(--blue-bg);border:1px solid var(--blue-mid);
  font-size:.78rem;color:var(--blue);font-weight:600;
  align-items:center;gap:.4rem;
}
.prof-tag.show{display:inline-flex;}

/* ‚îÄ‚îÄ COURSES AREA ‚îÄ‚îÄ */
.courses-placeholder{
  max-width:800px;margin:0 auto 1.2rem;
  padding:2.5rem 1rem;text-align:center;
  color:var(--dim);font-size:.88rem;
  background:var(--white);border-radius:16px;
  border:1.5px dashed var(--border2);
}
.placeholder-icon{font-size:2.2rem;margin-bottom:.6rem;opacity:.35;}

/* ‚îÄ‚îÄ COURSE CARD ‚îÄ‚îÄ */
.course-card{
  max-width:800px;margin:0 auto 1.2rem;
  background:var(--white);border-radius:16px;
  border:1px solid var(--border);box-shadow:var(--shadow);
  overflow:hidden;
  opacity:0;transform:translateY(14px);
  transition:opacity .3s ease,transform .3s ease;
}
.course-card.visible{opacity:1;transform:translateY(0);}

.course-head{
  padding:1rem 1.5rem;
  display:flex;align-items:center;gap:.9rem;
  border-bottom:1px solid var(--border);
  background:linear-gradient(135deg,#eff6ff,#f8fafc);
}
.course-num{
  width:34px;height:34px;border-radius:10px;
  background:var(--blue);color:#fff;
  font-size:.82rem;font-weight:800;
  display:flex;align-items:center;justify-content:center;flex-shrink:0;
}
.course-name-txt{font-weight:700;font-size:.93rem;color:var(--text);}
.course-code-txt{
  font-family:'JetBrains Mono',monospace;
  font-size:.72rem;color:var(--dim);margin-top:.12rem;
}
.course-pills{display:flex;gap:.4rem;margin-left:auto;flex-wrap:wrap;}
.pill{
  padding:.2rem .65rem;border-radius:999px;
  font-size:.7rem;font-weight:700;white-space:nowrap;
}
.pill-blue  {background:var(--blue-bg);color:var(--blue);}
.pill-green {background:var(--green-bg);color:var(--green);}
.pill-purple{background:var(--purple-bg);color:var(--purple);}
.pill-grey  {background:#f1f5f9;color:var(--dim);}

.course-body{padding:1.5rem;}

/* Auto-filled notice */
.auto-notice{
  padding:.5rem .85rem;background:var(--blue-bg);
  border-radius:7px;font-size:.73rem;color:var(--blue);
  margin-bottom:1rem;display:flex;align-items:center;gap:.4rem;
}

/* ‚îÄ‚îÄ SECTION DIVIDERS ‚îÄ‚îÄ */
.sec-title{
  font-size:.72rem;font-weight:700;letter-spacing:.08em;
  text-transform:uppercase;padding-bottom:.5rem;
  border-bottom:2px solid;margin-bottom:.9rem;
}
.sec-blue  {color:var(--blue);border-color:var(--blue-bg);}
.sec-green {color:var(--green);border-color:var(--green-bg);}
.sec-grey  {color:var(--dim);border-color:var(--border);}

/* ‚îÄ‚îÄ STUDENT ROWS ‚îÄ‚îÄ */
.student-row{
  display:grid;
  grid-template-columns:1.8fr 1.1fr 1.3fr 34px;
  gap:.6rem;align-items:end;
  padding:.75rem;border-radius:9px;
  background:var(--bg);border:1px solid var(--border);
  margin-bottom:.6rem;
}
.s-label{
  font-size:.71rem;font-weight:600;
  color:var(--dim);margin-bottom:.3rem;display:block;
}
.remove-btn{
  width:32px;height:32px;border-radius:8px;border:none;
  background:var(--red-bg);color:var(--red);
  cursor:pointer;font-size:.85rem;
  display:flex;align-items:center;justify-content:center;
  transition:all .15s;flex-shrink:0;align-self:flex-end;
}
.remove-btn:hover{background:var(--red);color:#fff;}
.add-student-btn{
  display:inline-flex;align-items:center;gap:.4rem;
  padding:.5rem .9rem;border-radius:8px;
  border:1.5px dashed var(--blue);color:var(--blue);
  background:var(--blue-bg);font-size:.78rem;font-weight:600;
  cursor:pointer;transition:all .2s;font-family:inherit;
  margin-top:.3rem;
}
.add-student-btn:hover{background:var(--blue);color:#fff;}

/* ‚îÄ‚îÄ SUBMIT ‚îÄ‚îÄ */
.submit-wrap{
  max-width:800px;margin:1.5rem auto 0;
}
.submit-btn{
  width:100%;padding:.95rem;border-radius:12px;border:none;
  background:var(--blue);color:#fff;font-family:inherit;
  font-size:.97rem;font-weight:700;cursor:pointer;
  transition:all .2s;display:flex;align-items:center;
  justify-content:center;gap:.5rem;
  box-shadow:0 4px 20px rgba(37,99,235,.32);
}
.submit-btn:hover{background:#1d4ed8;transform:translateY(-1px);}
.submit-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;}
.submit-note{
  text-align:center;font-size:.74rem;
  color:var(--dim);margin-top:.6rem;
}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast{
  position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(20px);
  padding:.75rem 1.4rem;border-radius:10px;
  font-size:.85rem;font-weight:600;
  opacity:0;transition:all .3s;z-index:999;
  pointer-events:none;white-space:nowrap;
  box-shadow:0 8px 24px rgba(15,23,42,.18);
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
.toast.ok {background:var(--green);color:#fff;}
.toast.err{background:var(--red);color:#fff;}

/* ‚îÄ‚îÄ SUCCESS SCREEN ‚îÄ‚îÄ */
.success-screen{
  display:none;max-width:800px;margin:0 auto;
  text-align:center;padding:3rem 2rem;
  background:var(--white);border-radius:18px;
  border:1px solid var(--border);box-shadow:var(--shadow-lg);
}
.success-screen.show{display:block;}
.success-icon{font-size:3.5rem;margin-bottom:1rem;}
.success-title{font-size:1.4rem;font-weight:700;color:var(--green);margin-bottom:.5rem;}
.success-sub{font-size:.88rem;color:var(--dim);line-height:1.6;}
.success-btn{
  display:inline-flex;align-items:center;gap:.5rem;
  margin-top:1.5rem;padding:.7rem 1.5rem;
  border-radius:10px;background:var(--blue);color:#fff;
  font-family:inherit;font-size:.88rem;font-weight:700;
  border:none;cursor:pointer;transition:all .2s;
}
.success-btn:hover{background:#1d4ed8;}

@media(max-width:600px){
  .field-row,.field-row-3{grid-template-columns:1fr;}
  .student-row{grid-template-columns:1fr 1fr;}
  .course-pills{display:none;}
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê -->
<div class="toast" id="toast"></div>

<!-- ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê -->
<div class="page-header">
  <div class="header-card">
    <div class="header-stripe"></div>
    <div class="header-body">
      <div class="header-logo">
        <div class="logo-dot"></div>
        <span style="font-size:.75rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);">EDECA ‚Äî UNA</span>
        <div class="logo-dot"></div>
      </div>
      <div class="header-title">Registro de Adecuaciones Estudiantiles</div>
      <div class="header-sub">
        Seleccione el profesor para cargar autom√°ticamente sus cursos del ciclo activo.<br>
        Complete los estudiantes con adecuaci√≥n en cada curso y env√≠e el formulario.
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê CICLO ‚ïê‚ïê‚ïê -->
<div class="card" id="section-ciclo">
  <div class="card-head">
    <div class="card-icon" style="background:#eff6ff">üìÖ</div>
    <div>
      <div class="card-title">Ciclo lectivo</div>
      <div class="card-sub">Per√≠odo correspondiente a esta notificaci√≥n</div>
    </div>
  </div>
  <div class="card-body">
    <div class="field-row">
      <div class="field">
        <label class="field-label">Ciclo <span class="req">*</span></label>
        <select class="fi" id="ciclo">
          <option value="">‚Äî Seleccione ‚Äî</option>
          <option value="I Ciclo (Ene-Jun)">I Ciclo (Enero ‚Äì Junio)</option>
          <option value="II Ciclo (Jul-Nov)">II Ciclo (Julio ‚Äì Noviembre)</option>
        </select>
      </div>
      <div class="field">
        <label class="field-label">A√±o <span class="req">*</span></label>
        <select class="fi" id="anio">
          <option value="">‚Äî Seleccione ‚Äî</option>
          <option value="2025">2025</option>
          <option value="2026">2026</option>
          <option value="2027">2027</option>
        </select>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê PROFESOR ‚ïê‚ïê‚ïê -->
<div class="card" id="section-profesor">
  <div class="card-head">
    <div class="card-icon" style="background:#f0fdf4">üßë‚Äçüè´</div>
    <div>
      <div class="card-title">Seleccionar profesor</div>
      <div class="card-sub">Al seleccionar se cargan autom√°ticamente sus cursos asignados</div>
    </div>
  </div>
  <div class="card-body">
    <div class="field">
      <label class="field-label">Nombre del profesor <span class="req">*</span></label>
      <div class="prof-select-wrap">
        <select class="fi" id="prof-select" onchange="onProfChange()">
          <option value="">‚Äî Seleccione un profesor ‚Äî</option>
          <option value="Ronny Villalobos Quesada">Ronny Villalobos Quesada</option>
          <option value="Sergio Molina Brenes">Sergio Molina Brenes</option>
          <option value="Federico Alice P√©rez">Federico Alice P√©rez</option>
          <option value="Mar√≠a Chaves Rodr√≠guez">Mar√≠a Chaves Rodr√≠guez</option>
          <option value="Gustavo Vargas Sol√≠s">Gustavo Vargas Sol√≠s</option>
          <option value="Alina Aguilar Mora">Alina Aguilar Mora</option>
          <option value="Albert Morera Jim√©nez">Albert Morera Jim√©nez</option>
          <option value="Ernesto Montero Castro">Ernesto Montero Castro</option>
          <option value="Mar√≠a Loria Hern√°ndez">Mar√≠a Loria Hern√°ndez</option>
          <option value="Nancy Zamora Ulate">Nancy Zamora Ulate</option>
          <option value="Vanessa Valerio Brenes">Vanessa Valerio Brenes</option>
          <option value="Igor Zu√±iga Calvo">Igor Zu√±iga Calvo</option>
          <option value="Victor Meza Portuguez">Victor Meza Portuguez</option>
          <option value="Sherryl Campos Torres">Sherryl Campos Torres</option>
          <option value="Karla Vetrani L√≥pez">Karla Vetrani L√≥pez</option>
          <option value="Mar√≠a Gamboa Solano">Mar√≠a Gamboa Solano</option>
          <option value="Mar√≠a Alvarez Z√∫√±iga">Mar√≠a Alvarez Z√∫√±iga</option>
          <option value="Rafael Murillo Salas">Rafael Murillo Salas</option>
          <option value="Roy Cruz Araya">Roy Cruz Araya</option>
          <option value="Jos√© Rojas Madrigal">Jos√© Rojas Madrigal</option>
          <option value="Marco Otarola Vindas">Marco Otarola Vindas</option>
          <option value="Mar√≠a Avellan Sand√≠">Mar√≠a Avellan Sand√≠</option>
          <option value="Pablo Ramirez Fonseca">Pablo Ramirez Fonseca</option>
          <option value="Luis Diego Alfaro Mora">Luis Diego Alfaro Mora</option>
          <option value="Jos√© Castro Vega">Jos√© Castro Vega</option>
          <option value="Manfred Murrel Cascante">Manfred Murrel Cascante</option>
          <option value="Dami√°n Sanchez Rojas">Dami√°n Sanchez Rojas</option>
          <option value="Max Arguedas P√©rez">Max Arguedas P√©rez</option>
          <option value="Gustavo Hernandez Quesada">Gustavo Hernandez Quesada</option>
          <option value="Maria Bola√±os Castro">Maria Bola√±os Castro</option>
          <option value="Jesus Ugalde Monge">Jesus Ugalde Monge</option>
        </select>
        <div class="loading-bar" id="loading-bar">
          <div class="loading-fill" id="loading-fill"></div>
        </div>
        <div class="prof-tag" id="prof-tag">
          <span>‚úì</span><span id="prof-tag-text"></span>
        </div>
      </div>
      <div class="field-hint">La lista se actualiza cada ciclo desde la hoja de datos</div>
    </div>
    <div class="field-row" id="prof-info" style="display:none">
      <div class="field">
        <label class="field-label">Correo institucional</label>
        <input class="fi" type="text" id="prof-correo" readonly/>
        <div class="field-hint">Cargado autom√°ticamente</div>
      </div>
      <div class="field">
        <label class="field-label">Departamento</label>
        <input class="fi" type="text" id="prof-dept" readonly/>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê CURSOS AREA ‚ïê‚ïê‚ïê -->
<div class="courses-placeholder" id="courses-placeholder">
  <div class="placeholder-icon">üëÜ</div>
  <div>Seleccione un profesor para ver sus cursos asignados</div>
</div>
<div id="courses-container"></div>

<!-- ‚ïê‚ïê‚ïê SUBMIT ‚ïê‚ïê‚ïê -->
<div class="submit-wrap" id="submit-wrap" style="display:none">
  <button class="submit-btn" id="submit-btn" onclick="enviarFormulario()">
    ‚úâ Enviar notificaci√≥n al profesor
  </button>
  <div class="submit-note" id="submit-note"></div>
</div>

<!-- ‚ïê‚ïê‚ïê SUCCESS ‚ïê‚ïê‚ïê -->
<div class="success-screen" id="success-screen">
  <div class="success-icon">‚úÖ</div>
  <div class="success-title">¬°Notificaci√≥n enviada correctamente!</div>
  <div class="success-sub" id="success-sub"></div>
  <button class="success-btn" onclick="resetForm()">üìã Registrar otro profesor</button>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// URL del Apps Script ‚Äî NO MODIFICAR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyWNj_Hxg62OKnqvglzGgayIX5hwtdrFuIiWqIyMW2nCYjBw4anZTrirKq57y_XXvsJRw/exec";

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BASE DE DATOS ‚Äî Actualizar cada ciclo
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const DB = {
  "Ronny Villalobos Quesada": {
    correo: "rvillalobos@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-201",nombre:"Ecolog√≠a General",        grupo:"G01",horario:"Lun-Mi√© 7:00‚Äì9:00 a.m.", aula:"711",jornada:"am"},
      {codigo:"SCA-315",nombre:"Ecolog√≠a de Poblaciones", grupo:"G02",horario:"Mar-Jue 10:00‚Äì12:00 m.", aula:"709",jornada:"am"},
      {codigo:"SCA-410",nombre:"Ecolog√≠a del Paisaje",    grupo:"G01",horario:"Vie 1:00‚Äì4:00 p.m.",     aula:"LAB-601",jornada:"pm"}
    ]
  },
  "Sergio Molina Brenes": {
    correo: "smolina@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-110",nombre:"Introducci√≥n C. Ambientales",grupo:"G01",horario:"Lun-Mi√©-Vie 8:00‚Äì9:00 a.m.",aula:"710",jornada:"am"},
      {codigo:"SCA-220",nombre:"Manejo de Cuencas",          grupo:"G01",horario:"Mar-Jue 1:00‚Äì3:00 p.m.",    aula:"711",jornada:"pm"}
    ]
  },
  "Federico Alice P√©rez": {
    correo: "falice@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-305",nombre:"Limnolog√≠a",grupo:"G01",horario:"Mi√© 7:00‚Äì10:00 a.m.",aula:"LAB-602",jornada:"am"}
    ]
  },
  "Mar√≠a Chaves Rodr√≠guez": {
    correo: "mchaves@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-208",nombre:"Edafolog√≠a",              grupo:"G01",horario:"Lun-Mi√© 10:00 a.m.‚Äì12:00 m.",aula:"710",jornada:"am"},
      {codigo:"SCA-325",nombre:"Contaminaci√≥n de Suelos", grupo:"G02",horario:"Mar-Jue 6:00‚Äì8:00 p.m.",    aula:"708",jornada:"ev"}
    ]
  },
  "Gustavo Vargas Sol√≠s": {
    correo: "gvargas@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-401",nombre:"Gesti√≥n Ambiental",grupo:"G01",horario:"Lun-Mi√© 1:00‚Äì3:00 p.m.",aula:"LAB-603",jornada:"pm"}
    ]
  },
  "Alina Aguilar Mora": {
    correo: "aaguilar@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-115",nombre:"Qu√≠mica Ambiental",grupo:"G01",horario:"Mar-Jue 7:00‚Äì9:00 a.m.",aula:"709",jornada:"am"}
    ]
  },
  "Albert Morera Jim√©nez": {
    correo: "amorera@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-230",nombre:"Hidrolog√≠a",grupo:"G01",horario:"Lun-Mi√© 3:00‚Äì5:00 p.m.",aula:"711",jornada:"pm"}
    ]
  },
  "Ernesto Montero Castro": {
    correo: "emontero@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-312",nombre:"Meteorolog√≠a Ambiental",grupo:"G01",horario:"Vie 7:00‚Äì10:00 a.m.",aula:"710",jornada:"am"}
    ]
  },
  "Mar√≠a Loria Hern√°ndez": {
    correo: "mloria@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-105",nombre:"Biolog√≠a General",grupo:"G01",horario:"Lun-Mi√©-Vie 9:00‚Äì10:00 a.m.",aula:"708",jornada:"am"}
    ]
  },
  "Nancy Zamora Ulate": {
    correo: "nzamora@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-420",nombre:"Derecho Ambiental",grupo:"G01",horario:"Mar-Jue 6:00‚Äì8:00 p.m.",aula:"711",jornada:"ev"}
    ]
  },
  "Vanessa Valerio Brenes": {
    correo: "vvalerio@una.cr", dept: "Ciencias Ambientales",
    cursos: [
      {codigo:"SCA-215",nombre:"Planif. Uso del Suelo",grupo:"G01",horario:"Lun-Mi√© 10:00‚Äì12:00 m.",aula:"709",jornada:"am"}
    ]
  },
  "Igor Zu√±iga Calvo":      {correo:"izuniga@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-318",nombre:"Toxicolog√≠a Ambiental",    grupo:"G01",horario:"Mar-Jue 1:00‚Äì3:00 p.m.",   aula:"710",jornada:"pm"}]},
  "Victor Meza Portuguez":  {correo:"vmeza@una.cr",    dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-222",nombre:"Recursos Naturales",        grupo:"G01",horario:"Lun-Mi√© 1:00‚Äì3:00 p.m.",   aula:"708",jornada:"pm"}]},
  "Sherryl Campos Torres":  {correo:"scampos@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-310",nombre:"Legislaci√≥n Ambiental",     grupo:"G01",horario:"S√°b 7:00‚Äì10:00 a.m.",      aula:"708",jornada:"am"}]},
  "Karla Vetrani L√≥pez":    {correo:"kvetrani@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-225",nombre:"Ecolog√≠a Marina",           grupo:"G01",horario:"Mar-Jue 10:00‚Äì12:00 m.",   aula:"710",jornada:"am"}]},
  "Mar√≠a Gamboa Solano":    {correo:"mgamboa@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-302",nombre:"Fauna Silvestre",           grupo:"G01",horario:"S√°b 7:00‚Äì10:00 a.m.",      aula:"708",jornada:"am"}]},
  "Mar√≠a Alvarez Z√∫√±iga":   {correo:"malvarez@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-211",nombre:"Sistemas de Informaci√≥n",   grupo:"G01",horario:"Mar-Jue 1:00‚Äì3:00 p.m.",   aula:"711",jornada:"pm"}]},
  "Rafael Murillo Salas":   {correo:"rmurillo@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-403",nombre:"Restauraci√≥n Ecol√≥gica",    grupo:"G01",horario:"Lun-Mi√© 1:00‚Äì3:00 p.m.",   aula:"LAB-603",jornada:"pm"}]},
  "Roy Cruz Araya":         {correo:"rcruz@una.cr",    dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-210",nombre:"Edafolog√≠a Aplicada",       grupo:"G01",horario:"Mar-Jue 10:00‚Äì12:00 m.",   aula:"LAB-601",jornada:"am"}]},
  "Jos√© Rojas Madrigal":    {correo:"jrojas@una.cr",   dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-320",nombre:"Impacto Ambiental",         grupo:"G01",horario:"Mar-Jue 7:00‚Äì9:00 a.m.",   aula:"LAB-602",jornada:"am"}]},
  "Marco Otarola Vindas":   {correo:"motarola@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-315",nombre:"Biogeograf√≠a",              grupo:"G01",horario:"Mar-Jue 7:00‚Äì9:00 a.m.",   aula:"LAB-603",jornada:"am"},{codigo:"SCA-412",nombre:"Conservaci√≥n de Biodiversidad",grupo:"G01",horario:"Jue 1:00‚Äì4:00 p.m.",aula:"LAB-603",jornada:"pm"}]},
  "Mar√≠a Avellan Sand√≠":    {correo:"mavellan@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-218",nombre:"Bot√°nica Aplicada",         grupo:"G01",horario:"Mi√© 7:00‚Äì10:00 a.m.",      aula:"LAB-603",jornada:"am"}]},
  "Pablo Ramirez Fonseca":  {correo:"pramirez@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-101",nombre:"Fundamentos Ambientales",   grupo:"G01",horario:"Lun-Mi√© 7:00‚Äì9:00 a.m.",   aula:"LAB-601",jornada:"am"}]},
  "Luis Diego Alfaro Mora": {correo:"lalfaro@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-322",nombre:"Gesti√≥n del Agua",          grupo:"G01",horario:"Mar-Jue 7:00‚Äì9:00 a.m.",   aula:"LAB-601",jornada:"am"},{codigo:"SCA-405",nombre:"Cambio Clim√°tico",grupo:"G01",horario:"Lun 6:00‚Äì9:00 p.m.",aula:"LAB-601",jornada:"ev"}]},
  "Jos√© Castro Vega":       {correo:"jcastro@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-204",nombre:"Microbiolog√≠a Ambiental",   grupo:"G01",horario:"Lun-Mi√© 1:00‚Äì3:00 p.m.",   aula:"LAB-601",jornada:"pm"}]},
  "Manfred Murrel Cascante":{correo:"mmurrel@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-316",nombre:"Ecotoxicolog√≠a",            grupo:"G01",horario:"Lun-Mi√© 7:00‚Äì9:00 a.m.",   aula:"LAB-602",jornada:"am"}]},
  "Dami√°n Sanchez Rojas":   {correo:"dsanchez@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-423",nombre:"Pol√≠tica Ambiental",        grupo:"G01",horario:"Mar 6:00‚Äì9:00 p.m.",        aula:"LAB-601",jornada:"ev"}]},
  "Max Arguedas P√©rez":     {correo:"marguedas@una.cr",dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-330",nombre:"Energ√≠as Renovables",       grupo:"G01",horario:"Lun 6:00‚Äì9:00 p.m.",        aula:"LAB-601",jornada:"ev"}]},
  "Gustavo Hernandez Quesada":{correo:"ghernandez@una.cr",dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-201",nombre:"Ecolog√≠a General",       grupo:"G02",horario:"Lun-Mi√© 7:00‚Äì9:00 a.m.",   aula:"709",jornada:"am"}]},
  "Maria Bola√±os Castro":   {correo:"mbolanos@una.cr", dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-108",nombre:"Qu√≠mica General",           grupo:"G01",horario:"Lun 6:00‚Äì9:00 p.m.",        aula:"710",jornada:"ev"}]},
  "Jesus Ugalde Monge":     {correo:"jugalde@una.cr",  dept:"Ciencias Ambientales",cursos:[{codigo:"SCA-217",nombre:"Manejo de Residuos",        grupo:"G01",horario:"Jue 1:00‚Äì4:00 p.m.",        aula:"709",jornada:"pm"}]}
};

const JORNADA_LABEL = {am:"Ma√±ana",pm:"Tarde",ev:"Noche"};
const JORNADA_PILL  = {am:"pill-blue",pm:"pill-green",ev:"pill-purple"};
const TIPOS = ["No significativa","Significativa","De acceso"];

let studentCounts = {};
let currentProf   = null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SELECCI√ìN DE PROFESOR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function onProfChange() {
  const val = document.getElementById("prof-select").value;
  const container = document.getElementById("courses-container");
  const placeholder = document.getElementById("courses-placeholder");
  const submitWrap = document.getElementById("submit-wrap");

  container.innerHTML = "";
  document.getElementById("prof-info").style.display = "none";
  document.getElementById("prof-tag").classList.remove("show");
  submitWrap.style.display = "none";

  if (!val) {
    placeholder.style.display = "block";
    currentProf = null;
    return;
  }

  placeholder.style.display = "none";

  // Loading bar
  const bar  = document.getElementById("loading-bar");
  const fill = document.getElementById("loading-fill");
  bar.classList.add("show");
  fill.style.width = "0%";
  setTimeout(() => fill.style.width = "75%", 30);

  setTimeout(() => {
    fill.style.width = "100%";
    setTimeout(() => {
      bar.classList.remove("show");
      fill.style.width = "0%";
      cargarProfesor(val);
    }, 220);
  }, 480);
}

function cargarProfesor(nombre) {
  currentProf = DB[nombre];
  if (!currentProf) return;

  // Info del profesor
  document.getElementById("prof-correo").value = currentProf.correo;
  document.getElementById("prof-dept").value   = currentProf.dept;
  document.getElementById("prof-info").style.display = "grid";

  // Tag
  const tag = document.getElementById("prof-tag");
  document.getElementById("prof-tag-text").textContent =
    currentProf.cursos.length + " curso(s) asignado(s) este ciclo";
  tag.classList.add("show");

  // Renderizar cursos
  const container = document.getElementById("courses-container");
  currentProf.cursos.forEach((curso, i) => {
    studentCounts[curso.codigo] = 1;
    const card = crearCursoCard(curso, i);
    container.appendChild(card);
    setTimeout(() => card.classList.add("visible"), 60 * (i + 1));
  });

  // Submit
  const submitWrap = document.getElementById("submit-wrap");
  submitWrap.style.display = "block";
  document.getElementById("submit-note").textContent =
    "Se enviar√° un correo a " + currentProf.correo;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CREAR TARJETA DE CURSO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function crearCursoCard(curso, idx) {
  const card = document.createElement("div");
  card.className = "course-card";
  card.id = "card-" + curso.codigo.replace("-","");

  const optsTipo = TIPOS.map(t => '<option>' + t + '</option>').join("");

  card.innerHTML =
    '<div class="course-head">'
    + '<div class="course-num">' + (idx+1) + '</div>'
    + '<div style="flex:1">'
    + '<div class="course-name-txt">' + curso.nombre + '</div>'
    + '<div class="course-code-txt">' + curso.codigo + ' ¬∑ ' + curso.grupo + '</div>'
    + '</div>'
    + '<div class="course-pills">'
    + '<span class="pill ' + JORNADA_PILL[curso.jornada] + '">' + JORNADA_LABEL[curso.jornada] + '</span>'
    + '<span class="pill pill-grey">' + curso.aula + '</span>'
    + '</div></div>'
    + '<div class="course-body">'

    // Datos auto-cargados
    + '<div class="auto-notice">‚Üë Datos cargados autom√°ticamente desde la hoja de horarios</div>'
    + '<div class="field-row-3" style="margin-bottom:1.2rem">'
    + '<div class="field"><label class="field-label">C√≥digo / Grupo</label>'
    + '<input class="fi" type="text" value="' + curso.codigo + ' / ' + curso.grupo + '" readonly/></div>'
    + '<div class="field"><label class="field-label">Horario</label>'
    + '<input class="fi" type="text" value="' + curso.horario + '" readonly/></div>'
    + '<div class="field"><label class="field-label">Aula</label>'
    + '<input class="fi" type="text" value="' + curso.aula + '" readonly/></div>'
    + '</div>'

    // Estudiantes
    + '<div class="sec-title sec-blue">üéì Estudiantes con adecuaci√≥n</div>'
    + '<div id="students-' + curso.codigo.replace("-","") + '">'
    + buildStudentRow(curso.codigo, 1, optsTipo)
    + '</div>'
    + '<button class="add-student-btn" onclick="addStudent(\'' + curso.codigo + '\')">'
    + 'Ôºã Agregar otro estudiante</button>'

    // Observaciones
    + '<div class="sec-title sec-grey" style="margin-top:1.2rem">üìù Observaciones (opcional)</div>'
    + '<textarea class="fi" id="obs-' + curso.codigo.replace("-","") + '" '
    + 'placeholder="Indique cualquier detalle relevante para este curso..."></textarea>'

    + '</div>';

  return card;
}

function buildStudentRow(codigo, num, optsTipo) {
  if (!optsTipo) optsTipo = TIPOS.map(t => '<option>' + t + '</option>').join("");
  const id = codigo.replace("-","");
  return '<div class="student-row" id="sr-' + id + '-' + num + '">'
    + '<div><span class="s-label">Nombre completo</span>'
    + '<input class="fi" type="text" placeholder="Apellidos, Nombre" '
    + 'id="sn-' + id + '-' + num + '"/></div>'
    + '<div><span class="s-label">Carn√©</span>'
    + '<input class="fi" type="text" placeholder="20XX-XXXX" '
    + 'id="sc-' + id + '-' + num + '"/></div>'
    + '<div><span class="s-label">Tipo de adecuaci√≥n</span>'
    + '<select class="fi" id="st-' + id + '-' + num + '">' + optsTipo + '</select></div>'
    + '<button class="remove-btn" onclick="removeStudent(\'' + codigo + '\',' + num + ')" title="Eliminar">‚úï</button>'
    + '</div>';
}

function addStudent(codigo) {
  const id = codigo.replace("-","");
  studentCounts[codigo]++;
  const n = studentCounts[codigo];
  const container = document.getElementById("students-" + id);
  const tmp = document.createElement("div");
  tmp.innerHTML = buildStudentRow(codigo, n);
  const row = tmp.firstElementChild;
  row.style.opacity = "0";
  row.style.transform = "translateY(8px)";
  container.appendChild(row);
  setTimeout(() => {
    row.style.transition = "opacity .25s,transform .25s";
    row.style.opacity = "1";
    row.style.transform = "translateY(0)";
  }, 20);
}

function removeStudent(codigo, num) {
  const id = codigo.replace("-","");
  const row = document.getElementById("sr-" + id + "-" + num);
  if (!row) return;
  const container = document.getElementById("students-" + id);
  if (container.children.length <= 1) {
    showToast("Debe haber al menos un estudiante por curso", "err");
    return;
  }
  row.style.transition = "opacity .2s";
  row.style.opacity = "0";
  setTimeout(() => row.remove(), 200);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ENVIAR FORMULARIO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function enviarFormulario() {
  const ciclo  = document.getElementById("ciclo").value;
  const anio   = document.getElementById("anio").value;
  const profNombre = document.getElementById("prof-select").value;

  if (!ciclo || !anio) { showToast("Seleccione el ciclo y el a√±o", "err"); return; }
  if (!profNombre)     { showToast("Seleccione un profesor", "err"); return; }

  // Recopilar cursos y estudiantes
  const cursos = [];
  let hayEstudiantes = false;

  currentProf.cursos.forEach(curso => {
    const id = curso.codigo.replace("-","");
    const container = document.getElementById("students-" + id);
    if (!container) return;

    const estudiantes = [];
    Array.from(container.children).forEach(row => {
      const rowId = row.id.replace("sr-" + id + "-","");
      const nombre = document.getElementById("sn-" + id + "-" + rowId);
      const carne  = document.getElementById("sc-" + id + "-" + rowId);
      const tipo   = document.getElementById("st-" + id + "-" + rowId);
      if (nombre && nombre.value.trim()) {
        estudiantes.push({
          nombre: nombre.value.trim(),
          carne:  carne ? carne.value.trim() : "",
          tipo:   tipo  ? tipo.value : "No significativa"
        });
        hayEstudiantes = true;
      }
    });

    if (estudiantes.length > 0) {
      cursos.push({
        codigo:  curso.codigo,
        nombre:  curso.nombre,
        grupo:   curso.grupo,
        horario: curso.horario,
        aula:    curso.aula,
        estudiantes: estudiantes
      });
    }
  });

  if (!hayEstudiantes) {
    showToast("Ingrese al menos un estudiante con adecuaci√≥n", "err");
    return;
  }

  // Deshabilitar bot√≥n
  const btn = document.getElementById("submit-btn");
  btn.disabled = true;
  btn.textContent = "‚è≥ Enviando...";

  const payload = {
    ciclo:    ciclo,
    anio:     anio,
    profesor: profNombre,
    correo:   currentProf.correo,
    cursos:   cursos
  };

  // Enviar a Apps Script
  fetch(APPS_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  })
  .then(() => {
    // no-cors no devuelve respuesta legible, asumimos √©xito
    mostrarExito(profNombre, currentProf.correo, cursos.length);
  })
  .catch(err => {
    btn.disabled = false;
    btn.textContent = "‚úâ Enviar notificaci√≥n al profesor";
    showToast("Error al enviar. Intente de nuevo.", "err");
  });
}

function mostrarExito(profesor, correo, numCursos) {
  // Ocultar todo
  document.getElementById("section-ciclo").style.display    = "none";
  document.getElementById("section-profesor").style.display = "none";
  document.getElementById("courses-placeholder").style.display = "none";
  document.getElementById("courses-container").style.display   = "none";
  document.getElementById("submit-wrap").style.display         = "none";

  // Mostrar √©xito
  const screen = document.getElementById("success-screen");
  document.getElementById("success-sub").innerHTML =
    'El correo fue enviado a <strong>' + correo + '</strong><br>'
    + 'con la informaci√≥n de <strong>' + numCursos + ' curso(s)</strong> y sus estudiantes con adecuaci√≥n.<br><br>'
    + 'El registro qued√≥ guardado autom√°ticamente en la hoja de historial.';
  screen.classList.add("show");
}

function resetForm() {
  location.reload();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let toastTimer;
function showToast(msg, type) {
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.className = "toast " + type + " show";
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove("show"), 3000);
}
</script>
</body>
</html>
